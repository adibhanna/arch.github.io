<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Architecture Framework</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', system-ui, sans-serif; }

        .progress-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s ease;
        }

        .checkbox-custom {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .checkbox-custom:hover {
            transform: scale(1.1);
        }

        .section-expand {
            animation: expand 0.3s ease-out;
        }

        @keyframes expand {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hover-lift {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .hover-lift:hover {
            transform: translateY(-1px);
        }

        .dark .hover-lift:hover {
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
        }

        .light .hover-lift:hover {
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Icons
        const CheckCircle2 = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
        );

        const Circle = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
            </svg>
        );

        const ChevronDown = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6 9 12 15 18 9"/>
            </svg>
        );

        const Download = ({ size = 18, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
        );

        const Sun = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="4"/>
                <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
            </svg>
        );

        const Moon = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
        );

        const Plus = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M5 12h14"/><path d="M12 5v14"/>
            </svg>
        );

        const X = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
        );

        const Users = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
        );

        const ChevronsDown = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m7 6 5 5 5-5"/><path d="m7 13 5 5 5-5"/>
            </svg>
        );

        const ChevronsUp = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m17 18-5-5-5 5"/><path d="m17 11-5-5-5 5"/>
            </svg>
        );

        const RotateCcw = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                <path d="M3 3v5h5"/>
            </svg>
        );

        const Save = ({ size = 20, className = "" }) => (
            <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>
            </svg>
        );

        // Progress Ring Component
        const ProgressRing = ({ progress, size = 100, darkMode }) => {
            const strokeWidth = 6;
            const radius = (size - strokeWidth) / 2;
            const circumference = radius * 2 * Math.PI;
            const offset = circumference - (progress / 100) * circumference;

            return (
                <div className="relative inline-flex items-center justify-center">
                    <svg width={size} height={size} className="progress-ring">
                        <circle
                            className={darkMode ? "text-zinc-700" : "text-zinc-200"}
                            strokeWidth={strokeWidth}
                            stroke="currentColor"
                            fill="transparent"
                            r={radius}
                            cx={size / 2}
                            cy={size / 2}
                        />
                        <circle
                            className="progress-ring-circle"
                            strokeWidth={strokeWidth}
                            strokeDasharray={circumference}
                            strokeDashoffset={offset}
                            strokeLinecap="round"
                            stroke={darkMode ? "#a1a1aa" : "#52525b"}
                            fill="transparent"
                            r={radius}
                            cx={size / 2}
                            cy={size / 2}
                        />
                    </svg>
                    <div className="absolute flex flex-col items-center justify-center">
                        <span className={`text-2xl font-semibold ${darkMode ? 'text-zinc-100' : 'text-zinc-800'}`}>{progress}%</span>
                        <span className={`text-xs ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>complete</span>
                    </div>
                </div>
            );
        };

        const STORAGE_KEY = 'arch-framework-data';

        const ArchitectureFramework = () => {
            const [expandedSections, setExpandedSections] = useState({});
            const [checkedItems, setCheckedItems] = useState({});
            const [projectName, setProjectName] = useState('');
            const [notes, setNotes] = useState({});
            const [stakeholders, setStakeholders] = useState([]);
            const [newStakeholder, setNewStakeholder] = useState({ name: '', role: '' });
            const [lastSaved, setLastSaved] = useState(null);
            const [darkMode, setDarkMode] = useState(() => {
                if (typeof window !== 'undefined') {
                    const saved = localStorage.getItem('arch-framework-darkmode');
                    if (saved !== null) return JSON.parse(saved);
                    return window.matchMedia('(prefers-color-scheme: dark)').matches;
                }
                return false;
            });

            // Load from localStorage on mount
            useEffect(() => {
                try {
                    const saved = localStorage.getItem(STORAGE_KEY);
                    if (saved) {
                        const data = JSON.parse(saved);
                        if (data.checkedItems) setCheckedItems(data.checkedItems);
                        if (data.notes) setNotes(data.notes);
                        if (data.projectName) setProjectName(data.projectName);
                        if (data.expandedSections) setExpandedSections(data.expandedSections);
                        if (data.stakeholders) setStakeholders(data.stakeholders);
                        setLastSaved(new Date(data.savedAt));
                    }
                } catch (e) {
                    console.error('Failed to load saved data:', e);
                }
            }, []);

            // Save to localStorage on changes
            useEffect(() => {
                const timeoutId = setTimeout(() => {
                    try {
                        const data = {
                            checkedItems,
                            notes,
                            projectName,
                            expandedSections,
                            stakeholders,
                            savedAt: new Date().toISOString()
                        };
                        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
                        setLastSaved(new Date());
                    } catch (e) {
                        console.error('Failed to save data:', e);
                    }
                }, 500);
                return () => clearTimeout(timeoutId);
            }, [checkedItems, notes, projectName, expandedSections, stakeholders]);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', darkMode);
                localStorage.setItem('arch-framework-darkmode', JSON.stringify(darkMode));
            }, [darkMode]);

            const framework = [
                {
                    id: 'discovery',
                    phase: 'Discovery & Problem Definition',
                    number: '01',
                    description: 'Start by clearly defining the problem you\'re solving and understanding the constraints. This foundation prevents building the wrong thing and ensures alignment with business goals.',
                    sections: [
                        {
                            title: 'Problem Space',
                            description: 'Define the core problem and understand who you\'re building for.',
                            questions: [
                                'What problem are we solving? (One sentence)',
                                'What happens if we build nothing?',
                                'Who are the primary users? Secondary users?',
                                'What are their key pain points and frustrations?',
                                'What does success look like? How will we measure it?',
                                'What are the business goals and KPIs?',
                                'Who are the key stakeholders? What are their priorities?',
                                'Are there competing solutions? What are their limitations?'
                            ]
                        },
                        {
                            title: 'Scope & Constraints',
                            description: 'Establish boundaries and identify limitations early.',
                            questions: [
                                'What\'s in scope for v1? What\'s explicitly out of scope?',
                                'What\'s the timeline? Are there hard deadlines?',
                                'What\'s the budget? (Infrastructure, team, tooling)',
                                'What existing systems must we integrate with?',
                                'Any regulatory/compliance requirements? (GDPR, HIPAA, SOC2, PCI-DSS)',
                                'Any technical constraints? (Must use X, cannot use Y)',
                                'What are the non-negotiable requirements vs nice-to-haves?',
                                'Are there organizational or political constraints to consider?'
                            ]
                        }
                    ]
                },
                {
                    id: 'requirements',
                    phase: 'Requirements Analysis',
                    number: '02',
                    description: 'Quantify your system\'s needs. Vague requirements lead to over-engineering or under-building. Get specific numbers for scale, performance, and reliability.',
                    sections: [
                        {
                            title: 'Scale & Performance',
                            description: 'Understand traffic patterns and growth projections to size your system correctly.',
                            questions: [
                                'Expected users: Day 1? Month 1? Year 1? Year 3?',
                                'Requests per second: Average? Peak? Burst capacity needed?',
                                'Data volume: Initial size? Daily growth rate? Total after 1 year?',
                                'Latency requirements: P50? P95? P99? Hard limits?',
                                'Throughput requirements: Reads/sec? Writes/sec?',
                                'Geographic distribution: Single region? Multi-region? Global?',
                                'Traffic patterns: Steady? Bursty? Predictable spikes? Seasonal?',
                                'What are the expected concurrent users at peak?',
                                'Are there batch processing requirements? Volume? Frequency?'
                            ]
                        },
                        {
                            title: 'Availability & Reliability',
                            description: 'Define uptime targets and understand the cost of failures.',
                            questions: [
                                'Required uptime: 99%? 99.9%? 99.99%? 99.999%?',
                                'What\'s the acceptable downtime per month/year?',
                                'Recovery Time Objective (RTO)? How fast must we recover?',
                                'Recovery Point Objective (RPO)? How much data loss is acceptable?',
                                'Can we have scheduled maintenance windows? When?',
                                'What\'s the business cost of downtime per hour?',
                                'What SLAs do we need to offer to customers?',
                                'Are there external dependencies with their own SLAs?',
                                'What\'s the acceptable error rate? (e.g., 0.1% of requests)'
                            ]
                        },
                        {
                            title: 'Data Requirements',
                            description: 'Clarify consistency needs, access patterns, and data lifecycle.',
                            questions: [
                                'Strong consistency needed? Or eventual consistency OK? Where?',
                                'Read-heavy or write-heavy workload? Ratio?',
                                'Data retention requirements? Legal minimums/maximums?',
                                'Backup frequency needed? Full vs incremental?',
                                'Any data sovereignty requirements? Data residency laws?',
                                'PII or sensitive data involved? Classification levels?',
                                'Real-time data needs vs batch processing acceptable?',
                                'Data archival strategy? Hot/warm/cold storage tiers?',
                                'Audit trail requirements? Immutability needs?'
                            ]
                        }
                    ]
                },
                {
                    id: 'data-modeling',
                    phase: 'Data & Domain Modeling',
                    number: '03',
                    description: 'Model your domain before writing code. Understanding entities, relationships, and boundaries prevents costly refactors and enables better service decomposition.',
                    sections: [
                        {
                            title: 'Core Entities',
                            description: 'Identify the key concepts and how they relate to each other.',
                            questions: [
                                'What are the main entities/concepts in the domain?',
                                'What are the relationships between entities?',
                                'Which entities are immutable? Which change frequently?',
                                'What\'s the cardinality? (1:1, 1:many, many:many)',
                                'What are the access patterns for each entity?',
                                'What\'s the source of truth for each entity?',
                                'What are the key identifiers? Natural keys vs surrogate keys?',
                                'What attributes are required vs optional?',
                                'Are there temporal aspects? (Versioning, history, effective dates)'
                            ]
                        },
                        {
                            title: 'Domain Boundaries',
                            description: 'Define logical separations that will guide your architecture.',
                            questions: [
                                'What are the logical domains/bounded contexts?',
                                'Which domains are core vs supporting vs generic?',
                                'Where do domain boundaries align with team boundaries?',
                                'Which domains can evolve independently?',
                                'What events happen across domain boundaries?',
                                'Which domains have different consistency requirements?',
                                'Where are the transaction boundaries?',
                                'What data needs to be replicated across domains?'
                            ]
                        },
                        {
                            title: 'Data Storage Strategy',
                            description: 'Choose the right storage solutions for your data patterns.',
                            questions: [
                                'What database type fits each data pattern? (Relational, Document, Key-Value, Graph, Time-series)',
                                'What indexing strategy is needed? Primary, secondary, composite indexes?',
                                'Partitioning/sharding strategy? By what key? How many partitions?',
                                'Denormalization trade-offs? Where is it worth it?',
                                'What are the query patterns? Simple lookups vs complex queries?',
                                'Full-text search requirements? Which fields?',
                                'Caching strategy at the data layer? Cache-aside, write-through, write-behind?',
                                'Data migration strategy from existing systems?'
                            ]
                        }
                    ]
                },
                {
                    id: 'api-design',
                    phase: 'API Design',
                    number: '04',
                    description: 'APIs are contracts. Design them carefully as they\'re hard to change once published. Consider consumers, versioning, and long-term evolution.',
                    sections: [
                        {
                            title: 'API Strategy',
                            description: 'Define your overall approach to API design.',
                            questions: [
                                'API style: REST? GraphQL? gRPC? Event-driven? Why?',
                                'Who are the API consumers? Internal services? External partners? Public developers?',
                                'Synchronous vs asynchronous communication? Where?',
                                'Request/response format: JSON? Protocol Buffers? XML?',
                                'API gateway needed? What functionality? (Auth, rate limiting, transformation)',
                                'Service mesh requirements? (Istio, Linkerd, Consul)',
                                'How will APIs be discovered? Service registry? API catalog?'
                            ]
                        },
                        {
                            title: 'API Contracts',
                            description: 'Define clear contracts and standards.',
                            questions: [
                                'How will APIs be documented? OpenAPI/Swagger? GraphQL schema?',
                                'Naming conventions: URL structure, field names, error codes?',
                                'Pagination strategy: Cursor-based? Offset? Keyset?',
                                'Filtering and sorting conventions?',
                                'Error handling: Error format? HTTP status codes? Error codes?',
                                'Idempotency requirements? Idempotency keys?',
                                'Request validation: Where? How strict?',
                                'Response envelope structure? Metadata? Links (HATEOAS)?'
                            ]
                        },
                        {
                            title: 'API Versioning & Evolution',
                            description: 'Plan for change without breaking consumers.',
                            questions: [
                                'Versioning strategy: URL path? Header? Query param?',
                                'Breaking vs non-breaking change policy?',
                                'Deprecation process: Timeline? Communication? Sunset headers?',
                                'Backward compatibility requirements: How many versions supported?',
                                'How will you handle schema evolution?',
                                'Contract testing between services?',
                                'API changelog and migration guides?'
                            ]
                        }
                    ]
                },
                {
                    id: 'architecture',
                    phase: 'Architecture Design',
                    number: '05',
                    description: 'Make deliberate choices about system structure and technology. Document trade-offs explicitly—every decision has costs and benefits.',
                    sections: [
                        {
                            title: 'System Structure',
                            description: 'Define how components are organized and communicate.',
                            questions: [
                                'Monolith, modular monolith, or microservices? Why?',
                                'What are the major components/services?',
                                'Which components are synchronous? Asynchronous?',
                                'What are the external dependencies?',
                                'Single database or database per service? Why?',
                                'How do services communicate? HTTP? Message queues? Events?',
                                'What\'s the deployment unit? (Container, function, VM)',
                                'Serverless components? Where does it make sense?'
                            ]
                        },
                        {
                            title: 'Technology Choices',
                            description: 'Select tools and frameworks based on requirements, not trends.',
                            questions: [
                                'Primary programming language(s)? Why?',
                                'Framework choices? Why these over alternatives?',
                                'Database(s): Which ones? Why? (PostgreSQL, MongoDB, Redis, etc.)',
                                'Message queue/event bus: Which one? (Kafka, RabbitMQ, SQS, etc.)',
                                'Search infrastructure: Elasticsearch? Algolia? Database full-text?',
                                'File/blob storage: S3? GCS? Azure Blob?',
                                'CDN requirements? Which provider?',
                                'Infrastructure: AWS? GCP? Azure? On-prem? Multi-cloud?'
                            ]
                        },
                        {
                            title: 'Caching Strategy',
                            description: 'Design caching layers to optimize performance and reduce load.',
                            questions: [
                                'What layers need caching? (Browser, CDN, Application, Database)',
                                'Cache technology: Redis? Memcached? In-memory?',
                                'Cache invalidation strategy: TTL? Event-based? Manual?',
                                'Cache-aside, read-through, or write-through pattern?',
                                'What\'s the cache hit ratio target?',
                                'Cache warming strategy for cold starts?',
                                'Distributed caching requirements? Consistency?',
                                'Cache key design: Namespacing? Versioning?'
                            ]
                        },
                        {
                            title: 'Trade-offs & Decisions',
                            description: 'Document the compromises you\'re making and why.',
                            questions: [
                                'Consistency vs Availability: Which did we prioritize? Why?',
                                'Simplicity vs Flexibility: Where did we compromise?',
                                'Cost vs Performance: What\'s our optimization target?',
                                'Time to market vs Perfect design: What\'s the balance?',
                                'Build vs Buy: What are we building? What are we buying?',
                                'What technical debt are we intentionally accepting?',
                                'What are the key architectural decision records (ADRs)?',
                                'What would we do differently with more time/budget?'
                            ]
                        }
                    ]
                },
                {
                    id: 'testing',
                    phase: 'Testing Strategy',
                    number: '06',
                    description: 'Define how you\'ll verify the system works correctly. A comprehensive testing strategy catches bugs early and enables confident deployments.',
                    sections: [
                        {
                            title: 'Test Pyramid',
                            description: 'Plan your testing layers and coverage targets.',
                            questions: [
                                'Unit test coverage target? What\'s worth unit testing?',
                                'Integration test strategy: What integrations to test?',
                                'End-to-end test coverage: Critical user journeys?',
                                'Contract testing between services?',
                                'What testing frameworks and tools?',
                                'Test data management: Fixtures? Factories? Production snapshots?',
                                'Mocking strategy: What to mock? What to test against real services?',
                                'Code coverage requirements? Coverage tools?'
                            ]
                        },
                        {
                            title: 'Performance & Load Testing',
                            description: 'Verify the system meets performance requirements.',
                            questions: [
                                'Load testing approach: Tools? (k6, Gatling, Locust, JMeter)',
                                'Performance benchmarks: What latency targets?',
                                'Stress testing: How far beyond normal load?',
                                'Soak testing: Long-running stability tests?',
                                'Capacity planning: How to determine scaling thresholds?',
                                'Performance regression testing in CI/CD?',
                                'Database query performance testing?',
                                'Third-party dependency performance impact?'
                            ]
                        },
                        {
                            title: 'Specialized Testing',
                            description: 'Additional testing for specific quality attributes.',
                            questions: [
                                'Security testing: SAST? DAST? Penetration testing schedule?',
                                'Accessibility testing: WCAG compliance level? Tools?',
                                'Chaos engineering: Failure injection testing? (Chaos Monkey, Gremlin)',
                                'Data integrity testing: Consistency checks?',
                                'Backup/restore testing: How often verified?',
                                'Disaster recovery drills: Frequency? Scope?',
                                'Browser/device compatibility testing matrix?',
                                'API compatibility testing for breaking changes?'
                            ]
                        }
                    ]
                },
                {
                    id: 'cicd',
                    phase: 'CI/CD & Deployment',
                    number: '07',
                    description: 'Automate your path to production. Good CI/CD practices enable fast, reliable, and safe deployments.',
                    sections: [
                        {
                            title: 'Build & Integration',
                            description: 'Define your continuous integration pipeline.',
                            questions: [
                                'CI platform: GitHub Actions? GitLab CI? Jenkins? CircleCI?',
                                'Build pipeline stages: Lint, test, build, scan, publish?',
                                'Build time target? Current build time?',
                                'Artifact management: Container registry? Package registry?',
                                'Dependency scanning: Vulnerabilities? License compliance?',
                                'Code quality gates: Coverage? Complexity? Duplication?',
                                'Branch strategy: GitFlow? Trunk-based? GitHub Flow?',
                                'Merge requirements: Reviews? CI passing? Approvals?'
                            ]
                        },
                        {
                            title: 'Deployment Strategy',
                            description: 'Define how changes reach production.',
                            questions: [
                                'Deployment frequency target: Daily? Weekly? Continuous?',
                                'Deployment strategy: Rolling? Blue-green? Canary? Feature flags?',
                                'Environment progression: Dev → Staging → Production?',
                                'Infrastructure as Code: Terraform? CloudFormation? Pulumi?',
                                'Container orchestration: Kubernetes? ECS? Nomad?',
                                'Database migration strategy: How applied? Rollback plan?',
                                'Configuration management: Environment variables? Secrets manager?',
                                'Deployment approval process: Manual gates? Automated?'
                            ]
                        },
                        {
                            title: 'Release Management',
                            description: 'Control and manage releases safely.',
                            questions: [
                                'Feature flags system: LaunchDarkly? Unleash? Custom?',
                                'Rollback strategy: Automated? Manual? Time to rollback?',
                                'Hotfix process: Emergency deployment path?',
                                'Release notes: Automated generation? Changelog format?',
                                'Deployment windows: Any restricted times?',
                                'Smoke tests post-deployment: What\'s verified?',
                                'Deployment metrics: Success rate? Frequency? Lead time?',
                                'Progressive rollout: Percentage-based? User segment-based?'
                            ]
                        }
                    ]
                },
                {
                    id: 'resilience',
                    phase: 'Resilience & Failure Planning',
                    number: '08',
                    description: 'Plan for failure before it happens. Systems fail—the question is whether you\'ve designed for graceful degradation and quick recovery.',
                    sections: [
                        {
                            title: 'Failure Modes',
                            description: 'Identify what can go wrong and assess the impact.',
                            questions: [
                                'What are the single points of failure?',
                                'What happens when each component fails?',
                                'What are the cascading failure risks?',
                                'Can we degrade gracefully? How? Which features?',
                                'What\'s the blast radius of each failure?',
                                'Which failures are acceptable? Which are catastrophic?',
                                'Dependency failure impact: What if each dependency is down?',
                                'Data corruption scenarios: Detection? Recovery?'
                            ]
                        },
                        {
                            title: 'Resilience Patterns',
                            description: 'Implement patterns to handle failures gracefully.',
                            questions: [
                                'Circuit breakers: Where? What thresholds? Fallback behavior?',
                                'Retry logic: Where? What backoff strategy? Max attempts?',
                                'Timeouts: What values? Connection vs read timeouts?',
                                'Bulkheads: Resource isolation between components?',
                                'Rate limiting: Where? What limits? Per user? Per IP?',
                                'Load shedding: Priority of requests when overloaded?',
                                'Fallback strategies: Cached responses? Default values? Degraded mode?',
                                'Health checks: Liveness? Readiness? Dependencies included?'
                            ]
                        },
                        {
                            title: 'Recovery & Redundancy',
                            description: 'Design mechanisms to recover quickly and prevent data loss.',
                            questions: [
                                'Backup strategy: What? How often? Where stored? Tested when?',
                                'Point-in-time recovery capability?',
                                'Disaster recovery plan: Documented? Tested? RTO/RPO met?',
                                'Redundancy: Active-active? Active-passive? Multi-region?',
                                'Failover process: Automatic? Manual? DNS-based?',
                                'Data replication: Sync? Async? Lag tolerance?',
                                'Incident response process: Runbooks? On-call rotation?',
                                'Post-incident review process: Blameless? Action items tracked?'
                            ]
                        }
                    ]
                },
                {
                    id: 'security',
                    phase: 'Security & Privacy',
                    number: '09',
                    description: 'Build security in from the start, not as an afterthought. Consider authentication, authorization, data protection, and compliance requirements.',
                    sections: [
                        {
                            title: 'Authentication & Authorization',
                            description: 'Define how users and services prove identity and access resources.',
                            questions: [
                                'Authentication method: OAuth2? SAML? OIDC? API keys?',
                                'Identity provider: Build vs buy? (Auth0, Okta, Cognito, Keycloak)',
                                'Multi-factor authentication: Required? Which factors?',
                                'Session management: Tokens? Cookies? Expiration policy?',
                                'Authorization model: RBAC? ABAC? Policy-based?',
                                'Permission granularity: Resource-level? Field-level?',
                                'Service-to-service auth: mTLS? Service accounts? JWT?',
                                'API authentication: API keys? OAuth tokens? Both?'
                            ]
                        },
                        {
                            title: 'Data Protection',
                            description: 'Protect data at rest, in transit, and in use.',
                            questions: [
                                'Encryption at rest: What data? What algorithm? Key management?',
                                'Encryption in transit: TLS version? Certificate management?',
                                'Secret management: Where stored? (Vault, AWS Secrets Manager, etc.)',
                                'Key rotation policy: Frequency? Automation?',
                                'PII handling: Identification? Encryption? Tokenization? Masking?',
                                'Data classification: Levels? Handling requirements per level?',
                                'Database encryption: Column-level? Table-level? Disk-level?',
                                'Backup encryption: Same keys? Different keys?'
                            ]
                        },
                        {
                            title: 'Security Practices',
                            description: 'Establish security processes and controls.',
                            questions: [
                                'Security scanning: SAST tools? DAST tools? Container scanning?',
                                'Dependency vulnerability scanning: Frequency? Remediation SLA?',
                                'Penetration testing: Frequency? Scope? Internal or third-party?',
                                'Security review process: When required? Who reviews?',
                                'OWASP Top 10: How addressed? (Injection, XSS, CSRF, etc.)',
                                'DDoS protection: CDN? WAF? Rate limiting?',
                                'Audit logging: What\'s logged? Retention? Access controls?',
                                'Incident response plan: Security-specific procedures?'
                            ]
                        },
                        {
                            title: 'Privacy & Compliance',
                            description: 'Ensure you handle user data responsibly and legally.',
                            questions: [
                                'What PII do we collect? Why? Minimization applied?',
                                'Data retention policy: How long? Automated deletion?',
                                'Right to deletion (RTBF): How implemented? Timeline?',
                                'Data portability: Export format? Delivery method?',
                                'Consent management: How captured? How honored?',
                                'Privacy by design: Data flow mapping? Impact assessments?',
                                'Compliance requirements: GDPR? CCPA? HIPAA? SOC2? PCI-DSS?',
                                'Third-party data sharing: DPAs in place? Purpose limitations?'
                            ]
                        }
                    ]
                },
                {
                    id: 'observability',
                    phase: 'Observability & Operations',
                    number: '10',
                    description: 'You can\'t fix what you can\'t see. Plan how you\'ll monitor, debug, and operate the system in production from day one.',
                    sections: [
                        {
                            title: 'Monitoring & Metrics',
                            description: 'Define what to measure and how to know when things go wrong.',
                            questions: [
                                'Key metrics: What are the Golden Signals? (Latency, traffic, errors, saturation)',
                                'Business metrics: What do stakeholders need to see?',
                                'Infrastructure metrics: CPU, memory, disk, network?',
                                'Application metrics: Request rates, response times, queue depths?',
                                'Custom metrics: What domain-specific metrics?',
                                'Metrics platform: Prometheus? Datadog? CloudWatch? New Relic?',
                                'Dashboards: What views? Who\'s the audience?',
                                'SLIs/SLOs/SLAs defined? Error budgets calculated?'
                            ]
                        },
                        {
                            title: 'Alerting',
                            description: 'Define when and how to notify the team of issues.',
                            questions: [
                                'Alerting thresholds: What triggers alerts? Avoid alert fatigue?',
                                'Severity levels: P1/P2/P3? Response time expectations?',
                                'Notification channels: PagerDuty? Slack? Email? Phone?',
                                'Escalation policy: Who\'s paged? When to escalate?',
                                'On-call rotation: Schedule? Compensation? Handoff process?',
                                'Alert runbooks: Documented response procedures?',
                                'Alert aggregation: Grouping related alerts?',
                                'Maintenance windows: Silencing alerts during deployments?'
                            ]
                        },
                        {
                            title: 'Logging & Tracing',
                            description: 'Enable debugging and understanding of system behavior.',
                            questions: [
                                'Logging format: Structured (JSON)? Log levels?',
                                'Log aggregation: ELK? Splunk? CloudWatch Logs? Loki?',
                                'Log retention: How long? Tiered storage?',
                                'Distributed tracing: OpenTelemetry? Jaeger? Zipkin? X-Ray?',
                                'Trace sampling strategy: Head-based? Tail-based? Rate?',
                                'Correlation IDs: How propagated across services?',
                                'What to log: Requests? Errors? Debug info? PII concerns?',
                                'Log-based alerting: Error rate spikes? Specific patterns?'
                            ]
                        },
                        {
                            title: 'Debugging & Profiling',
                            description: 'Tools and processes for investigating issues.',
                            questions: [
                                'APM tool: Datadog? New Relic? Dynatrace?',
                                'Profiling: CPU? Memory? When enabled?',
                                'Error tracking: Sentry? Rollbar? Bugsnag?',
                                'How to debug production issues safely?',
                                'Feature flags for debug modes?',
                                'Access to production logs: Who? How? Audit trail?',
                                'Reproduction environments: Can we replicate prod issues?',
                                'Post-mortem process: Template? Frequency? Tracking?'
                            ]
                        }
                    ]
                },
                {
                    id: 'cost',
                    phase: 'Cost & Resource Planning',
                    number: '11',
                    description: 'Understand and optimize the cost of running your system. Cloud costs can grow quickly without proper planning and monitoring.',
                    sections: [
                        {
                            title: 'Cost Estimation',
                            description: 'Estimate infrastructure and operational costs.',
                            questions: [
                                'Compute costs: Instance types? Sizing? Reserved vs on-demand?',
                                'Storage costs: Data volume? Storage tiers? Growth rate?',
                                'Network costs: Data transfer? Cross-region? CDN?',
                                'Database costs: Instance size? Storage? IOPS? Replicas?',
                                'Third-party service costs: APIs? SaaS tools? Licenses?',
                                'Total monthly cost estimate? Annual projection?',
                                'Cost per user/request/transaction?',
                                'Budget limits and alerts?'
                            ]
                        },
                        {
                            title: 'Cost Optimization',
                            description: 'Strategies to reduce and control costs.',
                            questions: [
                                'Reserved instances/savings plans: Commitment level?',
                                'Spot/preemptible instances: Where applicable?',
                                'Auto-scaling policies: Scale-down aggressive enough?',
                                'Right-sizing: Regular review of resource utilization?',
                                'Storage lifecycle policies: Auto-archive? Auto-delete?',
                                'Caching ROI: Cost savings from caching layer?',
                                'Multi-tenancy efficiency: Resource sharing between tenants?',
                                'Development/staging cost controls: Shutdown schedules?'
                            ]
                        },
                        {
                            title: 'Cost Monitoring',
                            description: 'Track and manage costs over time.',
                            questions: [
                                'Cost allocation tags: By team? By feature? By environment?',
                                'Cost anomaly detection: Alerts for unexpected spikes?',
                                'Showback/chargeback model: How costs attributed to teams?',
                                'Regular cost review: Frequency? Who\'s involved?',
                                'FinOps practices: Dedicated role? Tools?',
                                'Cost forecasting: Based on growth projections?',
                                'Optimization opportunities tracking?',
                                'Vendor contract reviews: Annual? Negotiation strategy?'
                            ]
                        }
                    ]
                },
                {
                    id: 'team',
                    phase: 'Team & Organization',
                    number: '12',
                    description: 'Architecture must match team capabilities and structure. The best technical design fails if the team can\'t build or maintain it.',
                    sections: [
                        {
                            title: 'Team Capabilities',
                            description: 'Assess whether your team can build and maintain this system.',
                            questions: [
                                'Team size: Current? 6 months? 1 year?',
                                'Team expertise: Strengths? Gaps? Training needed?',
                                'Learning curve: Can the team realistically support this?',
                                'Cognitive load: Is this architecture too complex?',
                                'Hiring plan: What roles needed? Timeline?',
                                'Contractor/consultant needs: What expertise to bring in?',
                                'Knowledge concentration risk: Bus factor?',
                                'Cross-training plan: Reducing single points of knowledge?'
                            ]
                        },
                        {
                            title: 'Team Structure',
                            description: 'Align architecture with organizational structure.',
                            questions: [
                                'Conway\'s Law: Does architecture match team structure?',
                                'Team autonomy: Can teams deploy independently?',
                                'Service ownership: Clear owners for each component?',
                                'On-call responsibility: Who owns production issues?',
                                'Communication patterns: Sync? Async? Meeting cadence?',
                                'Decision-making process: RFCs? ADRs? Architecture review?',
                                'Cross-team dependencies: How managed?',
                                'Platform team: Dedicated infrastructure/platform support?'
                            ]
                        },
                        {
                            title: 'Operational Burden',
                            description: 'Consider the ongoing cost of running and evolving the system.',
                            questions: [
                                'Deployment frequency: Current? Target?',
                                'Deployment complexity: Steps? Automation level?',
                                'Incident frequency: Current? Target?',
                                'MTTR (Mean Time to Recovery): Current? Target?',
                                'Technical debt management: How tracked? When addressed?',
                                'Toil reduction: Automation opportunities?',
                                'Documentation maintenance: Who? How kept current?',
                                'Onboarding time: How long for new team members?'
                            ]
                        }
                    ]
                },
                {
                    id: 'evolution',
                    phase: 'Evolution & Future-Proofing',
                    number: '13',
                    description: 'Systems evolve. Design for change by identifying what\'s likely to change, what\'s hard to change, and how you\'ll migrate without disruption.',
                    sections: [
                        {
                            title: 'Change Management',
                            description: 'Plan how to evolve the system safely over time.',
                            questions: [
                                'What will we learn post-launch that might change things?',
                                'Which parts are hardest to change later?',
                                'Which parts should stay flexible?',
                                'Migration strategy: How do we evolve without downtime?',
                                'Versioning strategy: APIs? Data schemas? Configurations?',
                                'Deprecation strategy: How do we sunset old versions?',
                                'Feature flags: Gradual rollout? A/B testing infrastructure?',
                                'Database schema evolution: Online migrations? Expand/contract?'
                            ]
                        },
                        {
                            title: 'Scalability Planning',
                            description: 'Anticipate and plan for growth.',
                            questions: [
                                'What\'s our scale plan? 10x? 100x?',
                                'Which components will hit limits first?',
                                'Horizontal vs vertical scaling: Where each applies?',
                                'Database scaling path: Read replicas? Sharding? NewSQL?',
                                'Caching scaling: Cluster? Sharding?',
                                'What architectural changes needed at each scale milestone?',
                                'Multi-region expansion plan?',
                                'What would break if we 10x users tomorrow?'
                            ]
                        },
                        {
                            title: 'Future Considerations',
                            description: 'Think ahead to future needs and opportunities.',
                            questions: [
                                'What new features are on the roadmap?',
                                'How does this architecture enable/constrain future products?',
                                'Technology refresh: When will current choices become obsolete?',
                                'Vendor lock-in assessment: What\'s the exit cost?',
                                'Open source vs proprietary: Long-term implications?',
                                'AI/ML integration: Future data and compute needs?',
                                'Regulatory changes: Anticipated compliance requirements?',
                                'Acquisition/integration: How hard to integrate/be integrated?'
                            ]
                        }
                    ]
                }
            ];

            // Calculate all section keys for expand/collapse all
            const allSectionKeys = useMemo(() => {
                const keys = [];
                framework.forEach(phase => {
                    phase.sections.forEach((_, sIndex) => {
                        keys.push(`${phase.id}-${sIndex}`);
                    });
                });
                return keys;
            }, []);

            const toggleSection = (phaseId, sectionIndex) => {
                const key = `${phaseId}-${sectionIndex}`;
                setExpandedSections(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const expandAll = () => {
                const expanded = {};
                allSectionKeys.forEach(key => expanded[key] = true);
                setExpandedSections(expanded);
            };

            const collapseAll = () => {
                setExpandedSections({});
            };

            const toggleCheck = (phaseId, sectionIndex, questionIndex) => {
                const key = `${phaseId}-${sectionIndex}-${questionIndex}`;
                setCheckedItems(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const updateNote = (phaseId, sectionIndex, questionIndex, value) => {
                const key = `${phaseId}-${sectionIndex}-${questionIndex}`;
                setNotes(prev => ({
                    ...prev,
                    [key]: value
                }));
            };

            const calculateProgress = () => {
                const totalQuestions = framework.reduce((acc, phase) =>
                    acc + phase.sections.reduce((sAcc, section) => sAcc + section.questions.length, 0), 0
                );
                const checkedCount = Object.values(checkedItems).filter(Boolean).length;
                return Math.round((checkedCount / totalQuestions) * 100);
            };

            const resetProgress = () => {
                if (window.confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                    setCheckedItems({});
                    setNotes({});
                    setProjectName('');
                    setExpandedSections({});
                    setStakeholders([]);
                    localStorage.removeItem(STORAGE_KEY);
                }
            };

            const addStakeholder = () => {
                if (newStakeholder.name.trim()) {
                    setStakeholders(prev => [...prev, { ...newStakeholder, id: Date.now() }]);
                    setNewStakeholder({ name: '', role: '' });
                }
            };

            const removeStakeholder = (id) => {
                setStakeholders(prev => prev.filter(s => s.id !== id));
            };

            const exportNotes = () => {
                let markdown = `# Architecture Framework: ${projectName || 'Untitled Project'}\n\n`;
                markdown += `**Progress**: ${calculateProgress()}%\n\n`;
                markdown += `**Date**: ${new Date().toLocaleDateString()}\n\n`;

                if (stakeholders.length > 0) {
                    markdown += `## Stakeholders\n\n`;
                    markdown += `| Name | Role |\n|------|------|\n`;
                    stakeholders.forEach(s => {
                        markdown += `| ${s.name} | ${s.role || '-'} |\n`;
                    });
                    markdown += `\n`;
                }

                markdown += `---\n\n`;

                framework.forEach(phase => {
                    markdown += `## ${phase.number}. ${phase.phase}\n\n`;
                    markdown += `> ${phase.description}\n\n`;
                    phase.sections.forEach((section, sIndex) => {
                        markdown += `### ${section.title}\n\n`;
                        if (section.description) {
                            markdown += `*${section.description}*\n\n`;
                        }
                        section.questions.forEach((question, qIndex) => {
                            const key = `${phase.id}-${sIndex}-${qIndex}`;
                            const isChecked = checkedItems[key];
                            const note = notes[key];
                            markdown += `- [${isChecked ? 'x' : ' '}] ${question}\n`;
                            if (note) {
                                markdown += `\n  **Answer**: ${note}\n\n`;
                            }
                        });
                        markdown += `\n`;
                    });
                });

                const blob = new Blob([markdown], { type: 'text/markdown' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `architecture-framework-${projectName.replace(/\s+/g, '-').toLowerCase() || 'project'}.md`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const totalQuestions = framework.reduce((acc, phase) =>
                acc + phase.sections.reduce((sAcc, section) => sAcc + section.questions.length, 0), 0
            );

            return (
                <div className={`min-h-screen transition-colors duration-300 ${darkMode ? 'dark bg-zinc-950' : 'bg-zinc-50'}`}>
                    <div className="max-w-4xl mx-auto px-4 sm:px-6 py-8 sm:py-12">
                        {/* Header */}
                        <div className={`rounded-2xl p-6 sm:p-8 mb-6 border transition-colors duration-300 ${darkMode ? 'bg-zinc-900 border-zinc-800' : 'bg-white border-zinc-200'}`}>
                            <div className="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6">
                                <div className="flex-1">
                                    <div className="flex items-center justify-between mb-4">
                                        <h1 className={`text-2xl sm:text-3xl font-semibold tracking-tight ${darkMode ? 'text-zinc-100' : 'text-zinc-900'}`}>
                                            System Architecture Framework
                                        </h1>
                                        <button
                                            onClick={() => setDarkMode(!darkMode)}
                                            className={`p-2 rounded-lg transition-colors ${darkMode ? 'hover:bg-zinc-800 text-zinc-400' : 'hover:bg-zinc-100 text-zinc-600'}`}
                                            aria-label="Toggle dark mode"
                                        >
                                            {darkMode ? <Sun size={20} /> : <Moon size={20} />}
                                        </button>
                                    </div>
                                    <p className={`text-sm mb-4 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                                        A comprehensive checklist for designing robust, scalable systems. {totalQuestions} questions across {framework.length} phases.
                                    </p>

                                    <div>
                                        <label className={`block text-xs font-medium mb-1.5 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>Project Name</label>
                                        <input
                                            type="text"
                                            placeholder="Enter project name..."
                                            value={projectName}
                                            onChange={(e) => setProjectName(e.target.value)}
                                            className={`w-full max-w-sm px-3 py-2 text-sm border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-zinc-500/20 ${darkMode ? 'bg-zinc-800 border-zinc-700 text-zinc-100 placeholder:text-zinc-600' : 'bg-zinc-50 border-zinc-200 text-zinc-900 placeholder:text-zinc-400'}`}
                                        />
                                    </div>
                                </div>

                                <div className="flex flex-row lg:flex-col items-center gap-4">
                                    <ProgressRing progress={calculateProgress()} darkMode={darkMode} />
                                    <div className="flex flex-col gap-2">
                                        <button
                                            onClick={exportNotes}
                                            className={`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${darkMode ? 'bg-zinc-800 hover:bg-zinc-700 text-zinc-300' : 'bg-zinc-900 hover:bg-zinc-800 text-white'}`}
                                        >
                                            <Download size={16} />
                                            <span>Export</span>
                                        </button>
                                        {lastSaved && (
                                            <div className={`flex items-center gap-1 text-xs ${darkMode ? 'text-zinc-600' : 'text-zinc-400'}`}>
                                                <Save size={12} />
                                                <span>Auto-saved</span>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Controls */}
                        <div className={`flex items-center justify-between mb-4 px-1`}>
                            <div className="flex items-center gap-2">
                                <button
                                    onClick={expandAll}
                                    className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${darkMode ? 'hover:bg-zinc-800 text-zinc-400' : 'hover:bg-zinc-100 text-zinc-600'}`}
                                >
                                    <ChevronsDown size={14} />
                                    <span>Expand all</span>
                                </button>
                                <button
                                    onClick={collapseAll}
                                    className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${darkMode ? 'hover:bg-zinc-800 text-zinc-400' : 'hover:bg-zinc-100 text-zinc-600'}`}
                                >
                                    <ChevronsUp size={14} />
                                    <span>Collapse all</span>
                                </button>
                            </div>
                            <button
                                onClick={resetProgress}
                                className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${darkMode ? 'hover:bg-zinc-800 text-zinc-500' : 'hover:bg-zinc-100 text-zinc-400'}`}
                            >
                                <RotateCcw size={14} />
                                <span>Reset</span>
                            </button>
                        </div>

                        {/* Stakeholders */}
                        <div className={`rounded-2xl p-5 mb-4 border transition-colors duration-300 ${darkMode ? 'bg-zinc-900 border-zinc-800' : 'bg-white border-zinc-200'}`}>
                            <div className="flex items-center gap-2 mb-4">
                                <Users size={18} className={darkMode ? 'text-zinc-500' : 'text-zinc-400'} />
                                <h2 className={`text-sm font-semibold ${darkMode ? 'text-zinc-300' : 'text-zinc-700'}`}>Stakeholders</h2>
                            </div>

                            {stakeholders.length > 0 && (
                                <div className="mb-4 space-y-2">
                                    {stakeholders.map((s) => (
                                        <div key={s.id} className={`flex items-center justify-between px-3 py-2 rounded-lg ${darkMode ? 'bg-zinc-800' : 'bg-zinc-50'}`}>
                                            <div className="flex-1 min-w-0">
                                                <span className={`text-sm font-medium ${darkMode ? 'text-zinc-200' : 'text-zinc-800'}`}>{s.name}</span>
                                                {s.role && (
                                                    <span className={`ml-2 text-xs ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>({s.role})</span>
                                                )}
                                            </div>
                                            <button
                                                onClick={() => removeStakeholder(s.id)}
                                                className={`p-1 rounded transition-colors ${darkMode ? 'hover:bg-zinc-700 text-zinc-500' : 'hover:bg-zinc-200 text-zinc-400'}`}
                                            >
                                                <X size={14} />
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="flex gap-2">
                                <input
                                    type="text"
                                    placeholder="Name"
                                    value={newStakeholder.name}
                                    onChange={(e) => setNewStakeholder(prev => ({ ...prev, name: e.target.value }))}
                                    onKeyDown={(e) => e.key === 'Enter' && addStakeholder()}
                                    className={`flex-1 px-3 py-2 text-sm border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-zinc-500/20 ${darkMode ? 'bg-zinc-800 border-zinc-700 text-zinc-100 placeholder:text-zinc-600' : 'bg-zinc-50 border-zinc-200 text-zinc-900 placeholder:text-zinc-400'}`}
                                />
                                <input
                                    type="text"
                                    placeholder="Role (optional)"
                                    value={newStakeholder.role}
                                    onChange={(e) => setNewStakeholder(prev => ({ ...prev, role: e.target.value }))}
                                    onKeyDown={(e) => e.key === 'Enter' && addStakeholder()}
                                    className={`flex-1 px-3 py-2 text-sm border rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-zinc-500/20 ${darkMode ? 'bg-zinc-800 border-zinc-700 text-zinc-100 placeholder:text-zinc-600' : 'bg-zinc-50 border-zinc-200 text-zinc-900 placeholder:text-zinc-400'}`}
                                />
                                <button
                                    onClick={addStakeholder}
                                    className={`px-3 py-2 rounded-lg transition-colors ${darkMode ? 'bg-zinc-800 hover:bg-zinc-700 text-zinc-300' : 'bg-zinc-100 hover:bg-zinc-200 text-zinc-700'}`}
                                >
                                    <Plus size={18} />
                                </button>
                            </div>
                        </div>

                        {/* Phases */}
                        <div className="space-y-4">
                            {framework.map((phase) => {
                                const phaseChecked = phase.sections.reduce((acc, section, sIndex) => {
                                    return acc + section.questions.filter((_, qIndex) =>
                                        checkedItems[`${phase.id}-${sIndex}-${qIndex}`]
                                    ).length;
                                }, 0);
                                const phaseTotal = phase.sections.reduce((acc, section) => acc + section.questions.length, 0);

                                return (
                                    <div key={phase.id} className={`rounded-2xl border overflow-hidden transition-colors duration-300 hover-lift ${darkMode ? 'bg-zinc-900 border-zinc-800' : 'bg-white border-zinc-200'}`}>
                                        {/* Phase Header */}
                                        <div className={`px-6 py-5 border-b ${darkMode ? 'border-zinc-800' : 'border-zinc-100'}`}>
                                            <div className="flex items-start justify-between gap-4">
                                                <div className="flex items-start gap-4">
                                                    <span className={`text-3xl font-semibold tabular-nums ${darkMode ? 'text-zinc-700' : 'text-zinc-300'}`}>{phase.number}</span>
                                                    <div className="flex-1">
                                                        <h2 className={`text-lg font-semibold ${darkMode ? 'text-zinc-100' : 'text-zinc-900'}`}>
                                                            {phase.phase}
                                                        </h2>
                                                        <p className={`text-sm mt-1.5 leading-relaxed ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
                                                            {phase.description}
                                                        </p>
                                                    </div>
                                                </div>
                                                <div className={`text-sm font-medium tabular-nums px-2.5 py-1 rounded-md ${darkMode ? 'bg-zinc-800 text-zinc-400' : 'bg-zinc-100 text-zinc-600'}`}>
                                                    {phaseChecked}/{phaseTotal}
                                                </div>
                                            </div>
                                        </div>

                                        {/* Sections */}
                                        <div className={`divide-y ${darkMode ? 'divide-zinc-800' : 'divide-zinc-100'}`}>
                                            {phase.sections.map((section, sIndex) => {
                                                const sectionKey = `${phase.id}-${sIndex}`;
                                                const isExpanded = expandedSections[sectionKey];
                                                const sectionChecked = section.questions.filter((_, qIndex) =>
                                                    checkedItems[`${phase.id}-${sIndex}-${qIndex}`]
                                                ).length;

                                                return (
                                                    <div key={sIndex}>
                                                        <button
                                                            onClick={() => toggleSection(phase.id, sIndex)}
                                                            className={`w-full px-6 py-4 flex items-center justify-between transition-colors ${darkMode ? 'hover:bg-zinc-800/50' : 'hover:bg-zinc-50'}`}
                                                        >
                                                            <div className="flex items-center gap-3">
                                                                <ChevronDown
                                                                    size={16}
                                                                    className={`transition-transform duration-200 ${darkMode ? 'text-zinc-600' : 'text-zinc-400'} ${isExpanded ? 'rotate-0' : '-rotate-90'}`}
                                                                />
                                                                <h3 className={`text-sm font-medium ${darkMode ? 'text-zinc-300' : 'text-zinc-700'}`}>
                                                                    {section.title}
                                                                </h3>
                                                            </div>
                                                            <div className="flex items-center gap-3">
                                                                <div className={`w-16 h-1 rounded-full overflow-hidden ${darkMode ? 'bg-zinc-800' : 'bg-zinc-200'}`}>
                                                                    <div
                                                                        className={`h-full rounded-full transition-all duration-500 ${darkMode ? 'bg-zinc-600' : 'bg-zinc-500'}`}
                                                                        style={{ width: `${(sectionChecked / section.questions.length) * 100}%` }}
                                                                    />
                                                                </div>
                                                                <span className={`text-xs font-medium tabular-nums ${darkMode ? 'text-zinc-600' : 'text-zinc-400'}`}>
                                                                    {sectionChecked}/{section.questions.length}
                                                                </span>
                                                            </div>
                                                        </button>

                                                        {isExpanded && (
                                                            <div className="px-6 pb-5 section-expand">
                                                                {section.description && (
                                                                    <p className={`ml-7 mb-4 text-xs ${darkMode ? 'text-zinc-600' : 'text-zinc-400'}`}>
                                                                        {section.description}
                                                                    </p>
                                                                )}
                                                                <div className="space-y-3 ml-7">
                                                                    {section.questions.map((question, qIndex) => {
                                                                        const itemKey = `${phase.id}-${sIndex}-${qIndex}`;
                                                                        const isChecked = checkedItems[itemKey];
                                                                        const note = notes[itemKey] || '';

                                                                        return (
                                                                            <div key={qIndex} className={`p-3 rounded-lg transition-colors ${isChecked ? (darkMode ? 'bg-zinc-800/50' : 'bg-zinc-50') : ''}`}>
                                                                                <div className="flex items-start gap-3">
                                                                                    <button
                                                                                        onClick={() => toggleCheck(phase.id, sIndex, qIndex)}
                                                                                        className="mt-0.5 flex-shrink-0 checkbox-custom"
                                                                                    >
                                                                                        {isChecked ? (
                                                                                            <CheckCircle2 size={18} className={darkMode ? 'text-zinc-500' : 'text-zinc-600'} />
                                                                                        ) : (
                                                                                            <Circle size={18} className={darkMode ? 'text-zinc-700 hover:text-zinc-600' : 'text-zinc-300 hover:text-zinc-400'} />
                                                                                        )}
                                                                                    </button>
                                                                                    <div className="flex-1 min-w-0">
                                                                                        <span className={`text-sm leading-relaxed ${isChecked ? (darkMode ? 'text-zinc-600' : 'text-zinc-400') : (darkMode ? 'text-zinc-300' : 'text-zinc-700')}`}>
                                                                                            {question}
                                                                                        </span>
                                                                                        <textarea
                                                                                            placeholder="Add notes..."
                                                                                            value={note}
                                                                                            onChange={(e) => updateNote(phase.id, sIndex, qIndex, e.target.value)}
                                                                                            className={`mt-2 w-full px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-zinc-500/20 resize-none transition-colors ${darkMode ? 'bg-zinc-800 border-zinc-700 text-zinc-300 placeholder:text-zinc-700' : 'bg-white border-zinc-200 text-zinc-700 placeholder:text-zinc-400'}`}
                                                                                            rows="2"
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        );
                                                                    })}
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>

                        <p className={`text-center text-xs mt-8 ${darkMode ? 'text-zinc-700' : 'text-zinc-400'}`}>
                            {totalQuestions} questions across {framework.length} phases · Progress auto-saved locally
                        </p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ArchitectureFramework />, document.getElementById('root'));
    </script>
</body>
</html>
